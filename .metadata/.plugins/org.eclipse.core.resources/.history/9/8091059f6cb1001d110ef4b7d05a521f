package com.salon.java.controller;

import com.salon.java.entity.Salon;
import com.salon.java.service.SalonService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.security.access.prepost.PreAuthorize;
//import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/salons")
public class SalonController {

    @Autowired
    private SalonService salonService;

    //create
   @PreAuthorize(" hasAuthority('Admin')")
    @PostMapping
    public ResponseEntity<Salon> createSalon(@RequestBody Salon salon){
        return ResponseEntity.status(HttpStatus.CREATED).body(salonService.create(salon));
    }
    // get single
   // @PreAuthorize("hasAuthority('SCOPE_internal')")
    @GetMapping("/{salonId}")
    public ResponseEntity<Salon> createSalon(@PathVariable String salonId){
        return ResponseEntity.status(HttpStatus.OK).body(salonService.getSalon(salonId));
    }

    // get All
  //  @PreAuthorize("hasAuthority('SCOPE_internal') || hasAuthority('Admin')")
    @GetMapping
    public ResponseEntity<List<Salon>> getAll(){
        return ResponseEntity.ok(salonService.getAllSalon());
    }
}
